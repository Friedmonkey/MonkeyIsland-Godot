[gd_scene load_steps=34 format=3 uid="uid://dxnwbn3vqjhme"]

[ext_resource type="Script" uid="uid://cnrjijulj0jqm" path="res://Character/character.gd" id="1_wa5vi"]
[ext_resource type="Script" uid="uid://kxh4dnwdgvuy" path="res://Player/animation_controller.gd" id="9_ghyj5"]
[ext_resource type="PackedScene" uid="uid://c0hrabmf30gmc" path="res://Models/Scenes/animatedMonkeyMan.tscn" id="10_hjhm6"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_b1ygp"]
animation = &"Falling"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_o28un"]
animation = &"RightPunch"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_pisgm"]
animation = &"StartFighting"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_n471f"]
animation = &"LeftPunch"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_apopc"]
filter_enabled = true
filters = ["Armature/Skeleton3D:mixamorig_Head", "Armature/Skeleton3D:mixamorig_HeadTop_End", "Armature/Skeleton3D:mixamorig_LeftArm", "Armature/Skeleton3D:mixamorig_LeftForeArm", "Armature/Skeleton3D:mixamorig_LeftHand", "Armature/Skeleton3D:mixamorig_LeftHandIndex1", "Armature/Skeleton3D:mixamorig_LeftHandIndex2", "Armature/Skeleton3D:mixamorig_LeftHandIndex3", "Armature/Skeleton3D:mixamorig_LeftHandIndex4", "Armature/Skeleton3D:mixamorig_LeftHandThumb1", "Armature/Skeleton3D:mixamorig_LeftHandThumb2", "Armature/Skeleton3D:mixamorig_LeftHandThumb3", "Armature/Skeleton3D:mixamorig_LeftHandThumb4", "Armature/Skeleton3D:mixamorig_LeftShoulder", "Armature/Skeleton3D:mixamorig_Neck", "Armature/Skeleton3D:mixamorig_RightArm", "Armature/Skeleton3D:mixamorig_RightForeArm", "Armature/Skeleton3D:mixamorig_RightHand", "Armature/Skeleton3D:mixamorig_RightHandIndex1", "Armature/Skeleton3D:mixamorig_RightHandIndex2", "Armature/Skeleton3D:mixamorig_RightHandIndex3", "Armature/Skeleton3D:mixamorig_RightHandIndex4", "Armature/Skeleton3D:mixamorig_RightHandThumb1", "Armature/Skeleton3D:mixamorig_RightHandThumb2", "Armature/Skeleton3D:mixamorig_RightHandThumb3", "Armature/Skeleton3D:mixamorig_RightHandThumb4", "Armature/Skeleton3D:mixamorig_RightShoulder"]

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_gpjlu"]
filter_enabled = true
filters = ["Armature/Skeleton3D:mixamorig_Head", "Armature/Skeleton3D:mixamorig_HeadTop_End", "Armature/Skeleton3D:mixamorig_LeftArm", "Armature/Skeleton3D:mixamorig_LeftForeArm", "Armature/Skeleton3D:mixamorig_LeftHand", "Armature/Skeleton3D:mixamorig_LeftHandIndex1", "Armature/Skeleton3D:mixamorig_LeftHandIndex2", "Armature/Skeleton3D:mixamorig_LeftHandIndex3", "Armature/Skeleton3D:mixamorig_LeftHandIndex4", "Armature/Skeleton3D:mixamorig_LeftHandThumb1", "Armature/Skeleton3D:mixamorig_LeftHandThumb2", "Armature/Skeleton3D:mixamorig_LeftHandThumb3", "Armature/Skeleton3D:mixamorig_LeftHandThumb4", "Armature/Skeleton3D:mixamorig_LeftShoulder", "Armature/Skeleton3D:mixamorig_Neck", "Armature/Skeleton3D:mixamorig_RightArm", "Armature/Skeleton3D:mixamorig_RightForeArm", "Armature/Skeleton3D:mixamorig_RightHand", "Armature/Skeleton3D:mixamorig_RightHandIndex1", "Armature/Skeleton3D:mixamorig_RightHandIndex2", "Armature/Skeleton3D:mixamorig_RightHandIndex3", "Armature/Skeleton3D:mixamorig_RightHandIndex4", "Armature/Skeleton3D:mixamorig_RightHandThumb1", "Armature/Skeleton3D:mixamorig_RightHandThumb2", "Armature/Skeleton3D:mixamorig_RightHandThumb3", "Armature/Skeleton3D:mixamorig_RightHandThumb4", "Armature/Skeleton3D:mixamorig_RightShoulder"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_5htga"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_gu6f8"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_apopc"]

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_b1ygp"]
filter_enabled = true
filters = ["Armature/Skeleton3D:mixamorig_Head", "Armature/Skeleton3D:mixamorig_HeadTop_End", "Armature/Skeleton3D:mixamorig_LeftArm", "Armature/Skeleton3D:mixamorig_LeftForeArm", "Armature/Skeleton3D:mixamorig_LeftHand", "Armature/Skeleton3D:mixamorig_LeftHandIndex1", "Armature/Skeleton3D:mixamorig_LeftHandIndex2", "Armature/Skeleton3D:mixamorig_LeftHandIndex3", "Armature/Skeleton3D:mixamorig_LeftHandIndex4", "Armature/Skeleton3D:mixamorig_LeftHandThumb1", "Armature/Skeleton3D:mixamorig_LeftHandThumb2", "Armature/Skeleton3D:mixamorig_LeftHandThumb3", "Armature/Skeleton3D:mixamorig_LeftHandThumb4", "Armature/Skeleton3D:mixamorig_LeftShoulder", "Armature/Skeleton3D:mixamorig_Neck", "Armature/Skeleton3D:mixamorig_RightArm", "Armature/Skeleton3D:mixamorig_RightForeArm", "Armature/Skeleton3D:mixamorig_RightHand", "Armature/Skeleton3D:mixamorig_RightHandIndex1", "Armature/Skeleton3D:mixamorig_RightHandIndex2", "Armature/Skeleton3D:mixamorig_RightHandIndex3", "Armature/Skeleton3D:mixamorig_RightHandIndex4", "Armature/Skeleton3D:mixamorig_RightHandThumb1", "Armature/Skeleton3D:mixamorig_RightHandThumb2", "Armature/Skeleton3D:mixamorig_RightHandThumb3", "Armature/Skeleton3D:mixamorig_RightHandThumb4", "Armature/Skeleton3D:mixamorig_RightShoulder"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_apopc"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5htga"]
animation = &"Walking"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_p5o4e"]
animation = &"Running"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_gu6f8"]
animation = &"Running"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_dkpta"]
animation = &"Running"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lfmf2"]
animation = &"Running"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_pisgm"]
blend_point_0/node = SubResource("AnimationNodeAnimation_apopc")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_5htga")
blend_point_1/pos = 1.0
blend_point_2/node = SubResource("AnimationNodeAnimation_p5o4e")
blend_point_2/pos = 2.0
blend_point_3/node = SubResource("AnimationNodeAnimation_gu6f8")
blend_point_3/pos = 3.0
blend_point_4/node = SubResource("AnimationNodeAnimation_dkpta")
blend_point_4/pos = 3.0
blend_point_5/node = SubResource("AnimationNodeAnimation_lfmf2")
blend_point_5/pos = 3.0
min_space = 0.0
max_space = 3.0
snap = 1.0

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_a23tb"]
animation = &"StartFighting"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_uerqc"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_1l6l2"]
graph_offset = Vector2(-472, -53)
nodes/Animation/node = SubResource("AnimationNodeAnimation_a23tb")
nodes/Animation/position = Vector2(-300, 140)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_uerqc")
nodes/TimeScale/position = Vector2(0, 120)
node_connections = [&"TimeScale", 0, &"Animation", &"output", 0, &"TimeScale"]

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_o28un"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jkkns"]
animation = &"RightPunch"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_twwou"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_a23tb"]
graph_offset = Vector2(-7, -42)
nodes/Animation/node = SubResource("AnimationNodeAnimation_jkkns")
nodes/Animation/position = Vector2(240, 100)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_twwou")
nodes/TimeScale/position = Vector2(540, 80)
nodes/output/position = Vector2(840, 140)
node_connections = [&"TimeScale", 0, &"Animation", &"output", 0, &"TimeScale"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_twwou"]
animation = &"LeftPunch"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_a23tb"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_uerqc"]
graph_offset = Vector2(-308, 7)
nodes/Animation/node = SubResource("AnimationNodeAnimation_twwou")
nodes/Animation/position = Vector2(-344.064, 196.189)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_a23tb")
nodes/TimeScale/position = Vector2(-20, 180)
node_connections = [&"TimeScale", 0, &"Animation", &"output", 0, &"TimeScale"]

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_jkkns"]
input_0/name = "guarding"
input_0/auto_advance = false
input_0/break_loop_at_end = false
input_0/reset = true
input_1/name = "punch_buffer_0"
input_1/auto_advance = false
input_1/break_loop_at_end = false
input_1/reset = true
input_2/name = "punch_buffer_1"
input_2/auto_advance = false
input_2/break_loop_at_end = false
input_2/reset = true

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_gu6f8"]
nodes/Animation/node = SubResource("AnimationNodeAnimation_n471f")
nodes/Animation/position = Vector2(940, 900)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_b1ygp")
"nodes/Animation 2/position" = Vector2(1560, -60)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_o28un")
"nodes/Animation 3/position" = Vector2(1200, 1080)
"nodes/Animation 4/node" = SubResource("AnimationNodeAnimation_pisgm")
"nodes/Animation 4/position" = Vector2(160, 540)
nodes/PunchLeft/node = SubResource("AnimationNodeOneShot_apopc")
nodes/PunchLeft/position = Vector2(1380, 620)
nodes/PunchRight/node = SubResource("AnimationNodeOneShot_gpjlu")
nodes/PunchRight/position = Vector2(1700, 680)
"nodes/TimeScale 2/node" = SubResource("AnimationNodeTimeScale_5htga")
"nodes/TimeScale 2/position" = Vector2(1480, 1020)
"nodes/TimeScale 3/node" = SubResource("AnimationNodeTimeScale_gu6f8")
"nodes/TimeScale 3/position" = Vector2(1140, 860)
nodes/TimeScale1/node = SubResource("AnimationNodeTimeScale_apopc")
nodes/TimeScale1/position = Vector2(-40, 200)
nodes/aiming_blend/node = SubResource("AnimationNodeBlend2_b1ygp")
nodes/aiming_blend/position = Vector2(1300, 120)
nodes/blend_movement/node = SubResource("AnimationNodeBlendSpace1D_pisgm")
nodes/blend_movement/position = Vector2(-300, 220)
nodes/guarding/node = SubResource("AnimationNodeBlendTree_1l6l2")
nodes/guarding/position = Vector2(560, 340)
nodes/on_floor_blend/node = SubResource("AnimationNodeBlend2_o28un")
nodes/on_floor_blend/position = Vector2(1820, 20)
nodes/output/position = Vector2(2260, -20)
nodes/punch_buffer_0/node = SubResource("AnimationNodeBlendTree_a23tb")
nodes/punch_buffer_0/position = Vector2(560, 480)
nodes/punch_buffer_1/node = SubResource("AnimationNodeBlendTree_uerqc")
nodes/punch_buffer_1/position = Vector2(560, 620)
nodes/punch_transition/node = SubResource("AnimationNodeTransition_jkkns")
nodes/punch_transition/position = Vector2(940, 400)
node_connections = [&"PunchLeft", 1, &"TimeScale 3", &"PunchRight", 0, &"PunchLeft", &"PunchRight", 1, &"TimeScale 2", &"TimeScale 2", 0, &"Animation 3", &"TimeScale 3", 0, &"Animation", &"TimeScale1", 0, &"blend_movement", &"aiming_blend", 0, &"TimeScale1", &"aiming_blend", 1, &"punch_transition", &"on_floor_blend", 0, &"Animation 2", &"on_floor_blend", 1, &"aiming_blend", &"output", 0, &"on_floor_blend", &"punch_transition", 0, &"guarding", &"punch_transition", 1, &"punch_buffer_0", &"punch_transition", 2, &"punch_buffer_1"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_l5upd"]
radius = 0.2
height = 1.2

[node name="Character" type="CharacterBody3D"]
script = ExtResource("1_wa5vi")

[node name="AnimationController" type="Node" parent="." node_paths=PackedStringArray("animation_tree", "player")]
script = ExtResource("9_ghyj5")
animation_tree = NodePath("../MeshRoot/AnimationTree")
player = NodePath("..")

[node name="MeshRoot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.38419e-07, 0)

[node name="AnimationTree" type="AnimationTree" parent="MeshRoot"]
root_node = NodePath("../animated_monkey_man_trimmed")
tree_root = SubResource("AnimationNodeBlendTree_gu6f8")
anim_player = NodePath("../animated_monkey_man_trimmed/AnimationPlayer")
parameters/PunchLeft/active = false
parameters/PunchLeft/internal_active = false
parameters/PunchLeft/request = 0
parameters/PunchRight/active = 9.96667
parameters/PunchRight/internal_active = 0.0
parameters/PunchRight/request = 0.0
"parameters/TimeScale 2/scale" = 1.0
"parameters/TimeScale 3/scale" = 0.0
parameters/TimeScale1/scale = 1.0
parameters/aiming_blend/blend_amount = 0.82
parameters/blend_movement/blend_position = 0.1
parameters/guarding/TimeScale/scale = 1.0
parameters/on_floor_blend/blend_amount = 0.82
parameters/punch_buffer_0/TimeScale/scale = 1.0
parameters/punch_buffer_1/TimeScale/scale = 1.0
parameters/punch_transition/current_state = "guarding"
parameters/punch_transition/transition_request = ""
parameters/punch_transition/current_index = 0

[node name="animated_monkey_man_trimmed" parent="MeshRoot" instance=ExtResource("10_hjhm6")]

[node name="Skeleton3D" parent="MeshRoot/animated_monkey_man_trimmed/Armature" index="0"]
bones/0/position = Vector3(0.648325, 3.06081, -63.0516)
bones/0/rotation = Quaternion(-0.718345, -0.0103319, -0.0109624, 0.695524)
bones/1/position = Vector3(6.00703e-08, 6.99434, -0.580394)
bones/1/rotation = Quaternion(-0.0312889, -9.03782e-05, 0.000103041, 0.99951)
bones/2/position = Vector3(9.49949e-08, 8.18811, 1.03284e-06)
bones/2/rotation = Quaternion(0.0121642, -0.0194263, -0.00237548, 0.999735)
bones/3/position = Vector3(-3.72529e-09, 9.35785, -6.48201e-07)
bones/3/rotation = Quaternion(0.0122003, -0.0194539, -0.00189961, 0.999735)
bones/4/position = Vector3(1.59256e-07, 10.5276, -4.97319e-07)
bones/4/rotation = Quaternion(0.025282, 0.00687064, -0.00969353, 0.99961)
bones/5/position = Vector3(-3.72529e-08, 5.07295, 0.219623)
bones/5/rotation = Quaternion(0.0504174, -0.0158142, 0.0336943, 0.998034)
bones/6/position = Vector3(-1.49012e-08, 16.3962, 0.709842)
bones/7/position = Vector3(4.06175, 9.39171, -0.103784)
bones/7/rotation = Quaternion(-0.520209, -0.457181, 0.599628, -0.401017)
bones/8/position = Vector3(5.66376e-07, 8.45856, 5.91099e-06)
bones/8/rotation = Quaternion(0.500959, 0.151077, 0.100354, 0.846254)
bones/9/position = Vector3(-3.89842e-07, 20.6769, -2.26159e-05)
bones/9/rotation = Quaternion(-0.0189138, 0.0106491, 0.242756, 0.969844)
bones/10/position = Vector3(-7.04517e-10, 17.9719, -6.91874e-06)
bones/10/rotation = Quaternion(0.0967777, 0.110986, -0.0545596, 0.987593)
bones/11/position = Vector3(-2.41666, 3.34332, 1.82166e-06)
bones/11/rotation = Quaternion(-0.0422438, -0.137115, 0.144668, 0.979023)
bones/12/position = Vector3(-0.597371, 3.24571, 9.42468e-07)
bones/12/rotation = Quaternion(0.0502655, 0.0307843, -0.139816, 0.988422)
bones/13/position = Vector3(0.0106109, 2.24793, 2.37244e-06)
bones/13/rotation = Quaternion(0.0700085, 0.00957149, -0.0260962, 0.997159)
bones/14/position = Vector3(0.586757, 1.60805, -5.67848e-06)
bones/15/position = Vector3(-6.92241e-07, 5.96599, -6.12997e-07)
bones/15/rotation = Quaternion(0.210773, -0.0227009, -0.110545, 0.970999)
bones/16/position = Vector3(-0.0401238, 3.81909, 7.98206e-06)
bones/16/rotation = Quaternion(0.52335, 0.00415694, -0.040349, 0.851152)
bones/17/position = Vector3(0.0344787, 1.87737, -1.02368e-05)
bones/17/rotation = Quaternion(0.0204859, -0.00307507, -0.0201146, 0.999583)
bones/18/position = Vector3(0.00564536, 2.05718, 3.47357e-06)
bones/19/position = Vector3(-4.06175, 9.39014, -0.0848554)
bones/19/rotation = Quaternion(0.569166, -0.436732, 0.53543, 0.44568)
bones/20/position = Vector3(-4.41249e-07, 8.45856, 1.52822e-06)
bones/20/rotation = Quaternion(0.523962, -0.136027, -0.130868, 0.830563)
bones/21/position = Vector3(-5.10304e-07, 20.6769, 7.96279e-07)
bones/21/rotation = Quaternion(-0.0203569, -0.0101006, -0.232385, 0.972358)
bones/22/position = Vector3(-8.22787e-07, 17.9718, -3.31614e-06)
bones/22/rotation = Quaternion(-0.00664328, -0.0216256, 0.11193, 0.993459)
bones/23/position = Vector3(2.97907, 3.21409, 2.80701e-06)
bones/23/rotation = Quaternion(-0.000922051, 0.0194353, -0.0735441, 0.997102)
bones/24/position = Vector3(0.615682, 3.45143, -8.74548e-06)
bones/24/rotation = Quaternion(0.0756976, -0.0468721, 0.0125009, 0.99595)
bones/25/position = Vector3(-0.102859, 2.07161, 1.13565e-05)
bones/25/rotation = Quaternion(-0.0132342, -0.0127028, -0.00416543, 0.999823)
bones/26/position = Vector3(-0.512836, 1.28946, -3.52014e-06)
bones/27/position = Vector3(-3.72362e-07, 6.19373, 4.26255e-06)
bones/27/rotation = Quaternion(0.177695, 0.00168925, 0.0959672, 0.979394)
bones/28/position = Vector3(0.0101761, 3.44529, -1.48246e-05)
bones/28/rotation = Quaternion(0.457274, -0.0024976, 0.0379814, 0.888511)
bones/29/position = Vector3(-0.0163656, 2.01669, 1.77065e-05)
bones/29/rotation = Quaternion(-0.0642577, 0.000832859, 0.00777424, 0.997903)
bones/30/position = Vector3(0.00619184, 2.10688, -8.03112e-06)
bones/31/position = Vector3(5.81758, -3.89321, -1.2225)
bones/31/rotation = Quaternion(0.0280433, 0.0788387, 0.995365, -0.0473957)
bones/32/position = Vector3(-1.52455e-06, 29.682, -4.96447e-07)
bones/32/rotation = Quaternion(-0.235155, -0.0812764, 0.0129198, 0.968468)
bones/33/position = Vector3(7.6128e-07, 26.5345, -3.47215e-07)
bones/33/rotation = Quaternion(0.6418, -0.0274782, -0.0191442, 0.766141)
bones/34/position = Vector3(1.15478e-06, 9.35281, -5.46771e-06)
bones/34/rotation = Quaternion(0.225963, -0.0611505, 0.0138891, 0.972115)
bones/35/position = Vector3(5.53206e-07, 3.82392, 2.23517e-07)
bones/36/position = Vector3(-5.81758, -3.8932, -1.21036)
bones/36/rotation = Quaternion(-0.123954, 0.0741021, 0.987177, 0.0680113)
bones/37/position = Vector3(9.42104e-07, 29.6777, 1.42621e-07)
bones/37/rotation = Quaternion(-0.183537, 0.0339407, -0.0129491, 0.982341)
bones/38/position = Vector3(-1.21453e-06, 26.5331, 1.55824e-06)
bones/38/rotation = Quaternion(0.594351, 0.0529119, 0.045865, 0.801151)
bones/39/position = Vector3(-8.04716e-07, 9.32334, 3.0821e-06)
bones/39/rotation = Quaternion(0.223101, 0.0612412, -0.0140406, 0.972768)
bones/40/position = Vector3(5.69969e-07, 3.81652, 5.51343e-07)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.6, 0)
shape = SubResource("CapsuleShape3D_l5upd")

[editable path="MeshRoot/animated_monkey_man_trimmed"]
